#!/bin/bash

# Create a report that summarizes data for multiple pokemon

output_file = "pokemon_report.csv"

echo "Name,Height (m),Weight (kg)" > $output_file

for file in pokemon_data/*.json; do
  name=$(jq -r '.name' "$file" | sed 's/"/\\"/g')
  height=$(jq -r '.height' "$file")
  weight=$(jq -r '.weight' $file)

  height_m=$(awk "BEGIN {printf \"%.1f\", $height / 10}")
  weight_kg=$(awk "BEGIN {printf \"%.1f\", $weight / 10}")

  echo "$name,$height_m,$weight_kg" >> $output_file

done

echo "Report generated successfully!"
echo ""
cat $output_file

# calculate averages
avg_height=$(awk -F, 'NR>1 {sum+=$2} END {print sum/NR}' $output_file)
avg_weight=$(awk -F, 'NR>1 {sum+=$3} END {print sum/NR}' $output_file)

echo "Average Height: $avg_height m"
echo "Average Weight: $avg_weight kg"
